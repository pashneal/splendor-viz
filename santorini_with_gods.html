<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/fomantic-ui@2.9.0/dist/semantic.min.css">
  <script src="https://cdn.jsdelivr.net/pyodide/v0.21.3/full/pyodide.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/onnxruntime-web@1.13.1/dist/ort.min.js"></script>
  
  <script src="./santorini/constants_withgods.js"></script>
  <script src="./santorini/main.js"></script>
  <style>
/*#fffaf3 bgound*/
    .toselect {
      background-color: #f3f8ff;
    }

    .toselect :hover {
      background-color: #dae9ff;
    }
  </style>
</head>
</head>
<body>

<div class="ui borderless menu">
  <div class="ui container">    
    <div class="fitted item">
      <button class="ui icon button" onclick="reset()"><i class="file outline icon"></i></button>
    </div> 
    
    <div class="fitted item"> 
      <div class="ui simple dropdown item">
        Difficulty <i class="dropdown icon"></i>
        <div class="menu">
          <div class="item" onclick="game.changeDifficulty(400)"        >Harder - native difficulty</div>
          <div class="item" onclick="game.changeDifficulty(100)"        >Hard</div>
          <div class="item" onclick="game.changeDifficulty(25)" selected>Medium</div>
          <div class="item" onclick="game.changeDifficulty(6)"          >Easy</div>
          <div class="item" onclick="game.changeDifficulty(2)"          >Come on</div>
        </div>
      </div>
    </div>
    <div class="fitted item"> 
      <div class="ui simple dropdown item">
        Players <i class="dropdown icon"></i>
        <div class="menu">
          <div class="item" onclick="changeGameMode('P0')" selected>P0 = human, P1 = computer</div>
          <div class="item" onclick="changeGameMode('P1')"         >P0 = computer, P1 = human</div>
          <div class="item" onclick="changeGameMode('Human')"      >Only human</div>
          <div class="item" onclick="changeGameMode('AI')"         >WarGames mode</div>
        </div>
      </div>
    </div>
    <!-- <div class="header vertically fitted item"><h1 class="ui header">Santorini game with AI</h1></div>   -->
    <div class="right menu">
      <div class="ui buttons">
        <!-- <button class="ui button" onclick="reset()">New</button> -->
        <button class="ui icon button" onclick="edit()" id="editBtn"><i class="edit icon"></i></button>
        <!-- <button class="ui icon button" onclick="$('.ui.modal').modal('show');"><i class="wrench icon"></i></button> -->
        <div class="ui icon button" data-position="bottom right" data-html="true" data-tooltip="Tap cells to move your worker and build"><i class="help icon"></i></div>
      </div>
    </div>
  </div>
</div>


<div class="ui main container">

  <h1 class="ui huge center aligned header">Santorini game with AI</h1> 
  <div class="ui hidden divider"></div>


<!-- Players name and power -->


  <div class="ui horizontal basic segments">
    <div class="ui center aligned vertically fitted segment">
      <span class="ui large green text" id="p0title">Player 0</span>
      <p id="p0details">Tap cells to move your worker and build</p>
    </div>
    <div class="ui center aligned vertically fitted segment">
      <span class="ui large red text" id="p1title">Player 1</span>
      <p id="p1details">You can change AI level in settings</p>
    </div>
  </div>


<!-- Table -->

  
  <table class="ui fixed unstackable celled huge table"><tbody>
    <tr class="center aligned">
      <td class="" id="cell_0_0"><span class="ui text">.</span></td>
      <td class="" id="cell_0_1"><span class="ui text">.</span></td>
      <td class="" id="cell_0_2"><span class="ui text">.</span></td>
      <td class="" id="cell_0_3"><span class="ui text">.</span></td>
      <td class="" id="cell_0_4"><span class="ui text">.</span></td>
    </tr>
    <tr class="center aligned">
      <td class="" id="cell_1_0"><span class="ui text">.</span></td>
      <td class="" id="cell_1_1"><span class="ui text">.</span></td>
      <td class="" id="cell_1_2"><span class="ui text">.</span></td>
      <td class="" id="cell_1_3"><span class="ui text">.</span></td>
      <td class="" id="cell_1_4"><span class="ui text">.</span></td>
    </tr>
    <tr class="center aligned">
      <td class="" id="cell_2_0"><span class="ui text">.</span></td>
      <td class="" id="cell_2_1"><span class="ui text">.</span></td>
      <td class="" id="cell_2_2"><span class="ui text">.</span></td>
      <td class="" id="cell_2_3"><span class="ui text">.</span></td>
      <td class="" id="cell_2_4"><span class="ui text">.</span></td>
    </tr>
    <tr class="center aligned">
      <td class="" id="cell_3_0"><span class="ui text">.</span></td>
      <td class="" id="cell_3_1"><span class="ui text">.</span></td>
      <td class="" id="cell_3_2"><span class="ui text">.</span></td>
      <td class="" id="cell_3_3"><span class="ui text">.</span></td>
      <td class="" id="cell_3_4"><span class="ui text">.</span></td>
    </tr>
    <tr class="center aligned">
      <td class="" id="cell_4_0"><span class="ui text">.</span></td>
      <td class="" id="cell_4_1"><span class="ui text">.</span></td>
      <td class="" id="cell_4_2"><span class="ui text">.</span></td>
      <td class="" id="cell_4_3"><span class="ui text">.</span></td>
      <td class="" id="cell_4_4"><span class="ui text">.</span></td>
    </tr>
  </tbody></table>


<!-- Button -->


  <div class="ui fluid large compact buttons" id="allBtn" style="display: none">
    <button class="ui icon button" id="undoBtn" onclick="cancel()"><i class="undo icon"></i></button>
    <button class="ui basic teal button" id="usePowerBtn" onclick="togglePower(false)">Without power</button>
    <button class="ui basic blue button" id="noPowerBtn" onclick="togglePower(true)">With power</button>
  </div>
  <button class="ui fluid large active loading button" id="loadingBtn">â€Œ</button>
  <div class="ui hidden info message" id="editMsg">
    <div class="header">Info for editing</div>
    <p>Tap on cells to change their heights, then tap again on edit button and tap on cells to toggle worker. Tap on god power to change them and finally tap edit button to validate</p>
  </div>

  <div class="ui basic segment">
    <p id="moveSgmt">Loading pyodide, numpy, onnx; please wait...</p>
  </div>
</div>


<script>
  const allBtn      = document.getElementById('allBtn');
  const undoBtn     = document.getElementById('undoBtn');
  const loadingBtn  = document.getElementById('loadingBtn');
  const usePowerBtn = document.getElementById('usePowerBtn');
  const noPowerBtn  = document.getElementById('noPowerBtn');
  const editBtn     = document.getElementById('editBtn');
  const moveSgmt    = document.getElementById('moveSgmt');
  const p0title     = document.getElementById('p0title');
  const p0details   = document.getElementById('p0details');
  const p1title     = document.getElementById('p1title');
  const p1details   = document.getElementById('p1details');
  const editMsg     = document.getElementById('editMsg');

  main(usePyodide=true);
</script>
</body>
</html>
